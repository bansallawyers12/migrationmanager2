{
	"info": {
		"_postman_id": "12345678-1234-1234-1234-123456789012",
		"name": "Client Portal Mobile App API",
		"description": "Complete API collection for Client Portal Mobile App authentication and profile management. Includes both Client Portal login (role=7) and Admin Portal login (roles=1,12,13,16) for WebSocket messaging support.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "1. Login",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"email\": \"viplucmca@yahoo.co.in\",\n    \"password\": \"12345678\",\n    \"device_name\": \"flutter-client-portal\",\n    \"device_token\": \"device_token_here\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/login",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"login"
					]
				},
				"description": "Login with email and password to get authentication token"
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"if (pm.response.code === 200) {",
							"    const responseJson = pm.response.json();",
							"    if (responseJson.success && responseJson.data) {",
							"        pm.collectionVariables.set('auth_token', responseJson.data.token);",
							"        pm.collectionVariables.set('refresh_token', responseJson.data.refresh_token);",
							"        console.log('Tokens saved to collection variables');",
							"    }",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"viplucmca@yahoo.co.in\",\n    \"password\": \"12345678\",\n    \"device_name\": \"flutter-client-portal\",\n    \"device_token\": \"device_token_here\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"login"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"data\": {\n        \"token\": \"jwt_token\",\n        \"refresh_token\": \"refresh_token\",\n        \"user\": {\n            \"id\": 1,\n            \"name\": \"Vipul Kumar\",\n            \"email\": \"viplucmca@yahoo.co.in\",\n            \"client_id\": \"CLI-001\"\n        }\n    }\n}"
				}
			]
		},
		{
			"name": "2. Admin Login",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"email\": \"admin1@gmail.com\",\n    \"password\": \"password123\",\n    \"device_name\": \"websocket-admin-portal\",\n    \"device_token\": \"device_token_here\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/admin-login",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"admin-login"
					]
				},
				"description": "Login for admin users with roles 1, 12, 13, 16 to get authentication token for WebSocket access"
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"if (pm.response.code === 200) {",
							"    const responseJson = pm.response.json();",
							"    if (responseJson.success && responseJson.data) {",
							"        pm.collectionVariables.set('admin_auth_token', responseJson.data.token);",
							"        pm.collectionVariables.set('admin_refresh_token', responseJson.data.refresh_token);",
							"        pm.collectionVariables.set('admin_user_id', responseJson.data.user.id);",
							"        pm.collectionVariables.set('admin_user_role', responseJson.data.user.role);",
							"        console.log('Admin tokens saved to collection variables');",
							"        console.log('Admin User ID: ' + responseJson.data.user.id);",
							"        console.log('Admin User Role: ' + responseJson.data.user.role);",
							"    }",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"admin1@gmail.com\",\n    \"password\": \"password123\",\n    \"device_name\": \"websocket-admin-portal\",\n    \"device_token\": \"device_token_here\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/admin-login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"admin-login"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"data\": {\n        \"token\": \"admin_jwt_token\",\n        \"refresh_token\": \"admin_refresh_token\",\n        \"user\": {\n            \"id\": 1,\n            \"name\": \"Super1 Admin1\",\n            \"email\": \"admin1@gmail.com\",\n            \"role\": 1\n        }\n    }\n}"
				},
				{
					"name": "Invalid Credentials",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"admin1@gmail.com\",\n    \"password\": \"wrongpassword\",\n    \"device_name\": \"websocket-admin-portal\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/admin-login",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"admin-login"
							]
						}
					},
					"status": "Unauthorized",
					"code": 401,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": false,\n    \"message\": \"Invalid credentials\"\n}"
				}
			]
		},
		{
			"name": "3. Logout",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{}"
				},
				"url": {
					"raw": "{{base_url}}/logout",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"logout"
					]
				},
				"description": "Logout and revoke current authentication token"
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{base_url}}/logout",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"logout"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Logged out successfully\"\n}"
				}
			]
		},
		{
			"name": "3.1. Logout All Devices",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{}"
				},
				"url": {
					"raw": "{{base_url}}/logout-all",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"logout-all"
					]
				},
				"description": "Logout from all devices and revoke all authentication tokens"
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{}"
						},
						"url": {
							"raw": "{{base_url}}/logout-all",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"logout-all"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Logged out from all devices successfully\"\n}"
				}
			]
		},
		{
			"name": "4. Refresh Token",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"refresh_token\": \"{{refresh_token}}\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/refresh",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"refresh"
					]
				},
				"description": "Refresh authentication token using refresh token"
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"if (pm.response.code === 200) {",
							"    const responseJson = pm.response.json();",
							"    if (responseJson.success && responseJson.data) {",
							"        pm.collectionVariables.set('auth_token', responseJson.data.token);",
							"        pm.collectionVariables.set('refresh_token', responseJson.data.refresh_token);",
							"        console.log('New tokens saved to collection variables');",
							"    }",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"refresh_token\": \"{{refresh_token}}\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/refresh",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"refresh"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"data\": {\n        \"token\": \"new_jwt_token\",\n        \"refresh_token\": \"new_refresh_token\",\n        \"user\": {\n            \"id\": 1,\n            \"name\": \"Client Name\",\n            \"email\": \"client@example.com\",\n            \"client_id\": \"CLI-001\"\n        }\n    }\n}"
				}
			]
		},
		{
			"name": "5. Forgot Password",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"email\": \"client@example.com\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/forgot-password",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"forgot-password"
					]
				},
				"description": "Send password reset code to user's email"
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"client@example.com\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/forgot-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"forgot-password"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Password reset code sent to your email\",\n    \"data\": {\n        \"email\": \"client@example.com\",\n        \"expires_in\": 600\n    }\n}"
				}
			]
		},
		{
			"name": "6. Reset Password",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"email\": \"client@example.com\",\n    \"code\": \"123456\",\n    \"password\": \"newpassword123\",\n    \"password_confirmation\": \"newpassword123\"\n}"
				},
				"url": {
					"raw": "{{base_url}}/reset-password",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"reset-password"
					]
				},
				"description": "Reset password using the code sent to email"
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"client@example.com\",\n    \"code\": \"123456\",\n    \"password\": \"newpassword123\",\n    \"password_confirmation\": \"newpassword123\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/reset-password",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"reset-password"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Password reset successfully. You can now login with your new password.\",\n    \"data\": {\n        \"email\": \"client@example.com\",\n        \"status\": \"password_reset\"\n    }\n}"
				}
			]
		},
		{
			"name": "7. Client Profile - Get Profile",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/profile",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"profile"
					]
				},
				"description": "Get authenticated client profile information"
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"phone\": \"+1234567890\",\n    \"address\": \"123 Main St\",\n    \"city\": \"Los Angeles\",\n    \"state\": \"CA\",\n    \"post_code\": \"90210\",\n    \"country\": \"USA\",\n    \"dob\": \"1990-01-01\",\n    \"gender\": \"Male\",\n    \"marital_status\": \"Single\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/profile",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"profile"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Profile updated successfully\",\n    \"data\": {\n        \"id\": 1,\n        \"client_id\": \"CLI-001\",\n        \"first_name\": \"John\",\n        \"last_name\": \"Doe\",\n        \"email\": \"client@example.com\",\n        \"phone\": \"+1234567890\",\n        \"address\": \"123 Main St\",\n        \"city\": \"Los Angeles\",\n        \"state\": \"CA\",\n        \"post_code\": \"90210\",\n        \"country\": \"USA\",\n        \"dob\": \"1990-01-01\",\n        \"gender\": \"Male\",\n        \"marital_status\": \"Single\",\n        \"profile_img\": \"path/to/profile/image.jpg\",\n        \"status\": 1,\n        \"role\": 7,\n        \"cp_status\": 1,\n        \"cp_code_verify\": 1,\n        \"email_verified_at\": \"2024-01-01T00:00:00Z\",\n        \"created_at\": \"2024-01-01T00:00:00Z\",\n        \"updated_at\": \"2024-01-01T00:00:00Z\"\n    }\n}"
				}
			]
		},
		{
			"name": "8. Matters (Cases) - Get All Matters",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/matters",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"matters"
					]
				},
				"description": "Get all active matters for the authenticated client. Records with sel_matter_id=1 are shown as 'General Matter'. Matter names include client unique matter numbers when available."
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/matters",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"matters"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"data\": {\n        \"matters\": [\n            {\n                \"matter_id\": 1,\n                \"matter_name\": \"General Matter (BA_2)\"\n            },\n            {\n                \"matter_id\": 2,\n                \"matter_name\": \"Immigration Visa Application (MAT-001)\"\n            },\n            {\n                \"matter_id\": 3,\n                \"matter_name\": \"Work Permit Application (WP-123)\"\n            },\n            {\n                \"matter_id\": 4,\n                \"matter_name\": \"Family Reunion Visa (FR-456)\"\n            }\n        ]\n    }\n}"
				}
			]
		},
		{
			"name": "9. Dashboard",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/dashboard?sel_matter_id=9",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"dashboard"
					],
					"query": [
						{
							"key": "sel_matter_id",
							"value": "9",
							"description": "Required: Filter dashboard data by specific matter ID from matters API (must be positive integer)"
						}
					]
				},
				"description": "Get dashboard data with cases, documents, appointments, and recent activities filtered by specific matter. The sel_matter_id parameter is required and must be a positive integer."
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/dashboard?sel_matter_id=9",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"dashboard"
							],
							"query": [
								{
									"key": "sel_matter_id",
									"value": "9"
								}
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"data\": {\n        \"active_cases\": 2,\n        \"total_documents\": 15,\n        \"total_appointments\": 3,\n        \"case_summary\": {\n            \"active_cases\": 2,\n            \"completed_cases\": 1,\n            \"total_cases\": 3\n        },\n        \"recent_cases\": [\n            {\n                \"id\": 1,\n                \"title\": \"Immigration Visa Application (MAT-001)\",\n                \"case_number\": \"Case #1\",\n                \"status\": \"In Progress\",\n                \"updated_at\": \"2024-01-01T00:00:00Z\"\n            }\n        ],\n        \"document_status\": {\n            \"summary\": {\n                \"approved\": 8,\n                \"pending\": 5,\n                \"rejected\": 2\n            },\n            \"overall_progress\": 53,\n            \"recent_documents\": [\n                {\n                    \"id\": 1,\n                    \"name\": \"Passport Copy\",\n                    \"status\": \"Approved\",\n                    \"uploaded_at\": \"2024-01-01T00:00:00Z\",\n                    \"uploaded_days_ago\": 5\n                }\n            ]\n        },\n        \"upcoming_deadlines\": {\n            \"summary\": {\n                \"due_this_week_count\": 2,\n                \"appointments_count\": 3,\n                \"overdue_count\": 1\n            },\n            \"due_this_week_list\": [\n                {\n                    \"id\": 1,\n                    \"title\": \"Submit Documents\",\n                    \"due_date\": \"2024-01-15\",\n                    \"due_datetime\": \"Jan 15, 2024\",\n                    \"status\": \"pending\",\n                    \"days_until\": 4,\n                    \"priority\": \"medium\",\n                    \"type\": \"deadline\"\n                }\n            ]\n        },\n        \"recent_activity\": [\n            {\n                \"id\": 1,\n                \"type\": \"Document\",\n                \"title\": \"Added personal document\",\n                \"description\": \"Passport copy uploaded for Case #123. Document is now under review...\",\n                \"created_at\": \"2024-01-01T00:00:00Z\",\n                \"updated_at\": \"2024-01-01T00:00:00Z\",\n                \"time_ago\": \"2 hours ago\"\n            }\n        ],\n        \"selected_matter_id\": 1\n    }\n}"
				}
			]
		},
		{
			"name": "10. Dashboard - Recent Cases (View All)",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/recent-cases?page=1&per_page=10&search=&status=&priority=&sel_matter_id=9",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"recent-cases"
					],
					"query": [
						{
							"key": "page",
							"value": "1",
							"description": "Page number for pagination"
						},
						{
							"key": "per_page",
							"value": "10",
							"description": "Number of items per page"
						},
						{
							"key": "search",
							"value": "",
							"description": "Search term for case title, case number, or status"
						},
						{
							"key": "status",
							"value": "",
							"description": "Filter by case status"
						},
						{
							"key": "priority",
							"value": "",
							"description": "Filter by case priority (high, medium, low)"
						},
						{
							"key": "sel_matter_id",
							"value": "9",
							"description": "Required: Filter by specific matter ID from matters API (must be positive integer)"
						}
					]
				},
				"description": "Get all recent cases with pagination, search, and filtering options"
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/recent-cases?page=1&per_page=10&search=&status=&priority=&sel_matter_id=9",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"recent-cases"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "10"
								},
								{
									"key": "search",
									"value": ""
								},
								{
									"key": "status",
									"value": ""
								},
								{
									"key": "priority",
									"value": ""
								},
								{
									"key": "sel_matter_id",
									"value": "9"
								}
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"data\": {\n        \"cases\": [\n            {\n                \"id\": 1,\n                \"title\": \"102 - Adoption (AP_2)\",\n                \"case_number\": \"Case #1\",\n                \"matter_number\": \"AP_2\",\n                \"case_type\": \"Adoption\",\n                \"case_code\": \"102\",\n                \"status\": \"Initial consultation\",\n                \"stage_name\": \"initial_consultation\",\n                \"priority\": \"low\",\n                \"priority_display\": \"LOW\",\n                \"priority_color\": \"#9E9E9E\",\n                \"description\": \"No description available\",\n                \"workflow_stage_id\": 1,\n                \"progress_percentage\": 7,\n                \"progress_display\": \"7%\",\n                \"is_file_closed\": false,\n                \"agents\": {\n                    \"migration_agent\": {\n                        \"id\": 36524,\n                        \"name\": \"John Smith\"\n                    },\n                    \"person_responsible\": {\n                        \"id\": 36484,\n                        \"name\": \"Sarah Johnson\"\n                    },\n                    \"person_assisting\": {\n                        \"id\": 36532,\n                        \"name\": \"Mike Wilson\"\n                    }\n                },\n                \"additional_info\": \"Unknown\",\n                \"workflow_stage\": {\n                    \"id\": 1,\n                    \"name\": \"initial_consultation\",\n                    \"display_name\": \"Initial consultation\"\n                },\n                \"actions\": {\n                    \"can_view_timeline\": true,\n                    \"can_view_details\": true,\n                    \"can_edit\": false,\n                    \"timeline_url\": \"/api/cases/1/timeline\",\n                    \"details_url\": \"/api/cases/1/details\"\n                },\n                \"created_at\": \"2025-09-01T00:00:00Z\",\n                \"updated_at\": \"2025-09-01T00:00:00Z\",\n                \"last_updated\": \"18 days ago\",\n                \"estimated_completion\": null,\n                \"client_unique_matter_no\": \"AP_2\"\n            },\n            {\n                \"id\": 2,\n                \"title\": \"020 - Bridging (Class B) (BA_2)\",\n                \"case_number\": \"Case #2\",\n                \"matter_number\": \"BA_2\",\n                \"case_type\": \"Bridging (Class B)\",\n                \"case_code\": \"020\",\n                \"status\": \"Initial consultation\",\n                \"stage_name\": \"initial_consultation\",\n                \"priority\": \"low\",\n                \"priority_display\": \"LOW\",\n                \"priority_color\": \"#9E9E9E\",\n                \"description\": \"No description available\",\n                \"workflow_stage_id\": 1,\n                \"progress_percentage\": 7,\n                \"progress_display\": \"7%\",\n                \"is_file_closed\": false,\n                \"agents\": {\n                    \"migration_agent\": {\n                        \"id\": 36524,\n                        \"name\": \"John Smith\"\n                    },\n                    \"person_responsible\": {\n                        \"id\": 36484,\n                        \"name\": \"Sarah Johnson\"\n                    },\n                    \"person_assisting\": {\n                        \"id\": 36532,\n                        \"name\": \"Mike Wilson\"\n                    }\n                },\n                \"additional_info\": \"Unknown\",\n                \"workflow_stage\": {\n                    \"id\": 1,\n                    \"name\": \"initial_consultation\",\n                    \"display_name\": \"Initial consultation\"\n                },\n                \"actions\": {\n                    \"can_view_timeline\": true,\n                    \"can_view_details\": true,\n                    \"can_edit\": false,\n                    \"timeline_url\": \"/api/cases/2/timeline\",\n                    \"details_url\": \"/api/cases/2/details\"\n                },\n                \"created_at\": \"2025-08-15T00:00:00Z\",\n                \"updated_at\": \"2025-08-20T00:00:00Z\",\n                \"last_updated\": \"30 days ago\",\n                \"estimated_completion\": null,\n                \"client_unique_matter_no\": \"BA_2\"\n            }\n        ],\n        \"summary\": {\n            \"total_cases\": 2,\n            \"active_cases\": 2,\n            \"completed_cases\": 0,\n            \"priority_breakdown\": {\n                \"high\": 0,\n                \"medium\": 0,\n                \"low\": 2\n            },\n            \"status_breakdown\": {\n                \"initial_consultation\": 2,\n                \"in_progress\": 0,\n                \"completed\": 0\n            }\n        },\n        \"pagination\": {\n            \"current_page\": 1,\n            \"per_page\": 10,\n            \"total_cases\": 2,\n            \"total_pages\": 1,\n            \"has_next_page\": false,\n            \"has_prev_page\": false\n        },\n        \"filters\": {\n            \"search\": \"\",\n            \"status\": \"\",\n            \"priority\": \"\",\n            \"sel_matter_id\": 1\n        },\n        \"filter_options\": {\n            \"status_filters\": [\n                {\"key\": \"all\", \"label\": \"All Status\", \"count\": 2},\n                {\"key\": \"initial_consultation\", \"label\": \"Initial Consultation\", \"count\": 2},\n                {\"key\": \"in_progress\", \"label\": \"In Progress\", \"count\": 0},\n                {\"key\": \"completed\", \"label\": \"Completed\", \"count\": 0}\n            ],\n            \"priority_filters\": [\n                {\"key\": \"all\", \"label\": \"All Priority\", \"count\": 2},\n                {\"key\": \"high\", \"label\": \"High\", \"count\": 0},\n                {\"key\": \"medium\", \"label\": \"Medium\", \"count\": 0},\n                {\"key\": \"low\", \"label\": \"Low\", \"count\": 2}\n            ]\n        }\n    }\n}"
				}
			]
		},
		{
			"name": "11. Dashboard - Documents (View All)",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/documents?page=1&per_page=10&search=&status=&doc_type=&sel_matter_id=9",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"documents"
					],
					"query": [
						{
							"key": "page",
							"value": "1",
							"description": "Page number for pagination"
						},
						{
							"key": "per_page",
							"value": "10",
							"description": "Number of items per page"
						},
						{
							"key": "search",
							"value": "",
							"description": "Search term for document name"
						},
						{
							"key": "status",
							"value": "",
							"description": "Filter by status (approved, pending, rejected)"
						},
						{
							"key": "doc_type",
							"value": "",
							"description": "Filter by document type (visa, personal)"
						},
						{
							"key": "sel_matter_id",
							"value": "9",
							"description": "Required: Filter by specific matter ID (must be positive integer) - applies only to visa documents, personal documents always included"
						}
					]
				},
				"description": "Get all documents with pagination, search, and filtering options"
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/documents?page=1&per_page=10&search=&status=&doc_type=&sel_matter_id=9",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"documents"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "10"
								},
								{
									"key": "search",
									"value": ""
								},
								{
									"key": "status",
									"value": ""
								},
								{
									"key": "doc_type",
									"value": ""
								},
								{
									"key": "sel_matter_id",
									"value": "9"
								}
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"data\": {\n        \"documents\": [\n            {\n                \"id\": 1,\n                \"name\": \"vipul_passport\",\n                \"file_name\": \"vipul_passport.pdf\",\n                \"file_type\": \"pdf\",\n                \"file_extension\": \"PDF\",\n                \"doc_type\": \"personal\",\n                \"status\": \"Approved\",\n                \"original_status\": \"signed\",\n                \"file_size\": 2048576,\n                \"file_size_formatted\": \"2.0 MB\",\n                \"uploaded_at\": \"2025-09-11T00:00:00Z\",\n                \"updated_at\": \"2025-09-11T00:00:00Z\",\n                \"uploaded_days_ago\": 8,\n                \"uploaded_date_formatted\": \"Sep 11, 2025\",\n                \"last_updated\": \"8 days ago\",\n                \"file_url\": \"https://bansalimmigration.s3.ap-southeast-1.amazonaws.com/documents/vipul_passport.pdf\",\n                \"file_key\": \"documents/vipul_passport.pdf\",\n                \"download_url\": \"https://bansalimmigration.s3.ap-southeast-1.amazonaws.com/documents/vipul_passport.pdf\",\n                \"is_downloadable\": true,\n                \"mime_type\": \"application/pdf\"\n            },\n            {\n                \"id\": 2,\n                \"name\": \"nts_1756380947\",\n                \"file_name\": \"nts_1756380947.pdf\",\n                \"file_type\": \"pdf\",\n                \"file_extension\": \"PDF\",\n                \"doc_type\": \"visa\",\n                \"status\": \"Pending\",\n                \"original_status\": \"draft\",\n                \"file_size\": 1536000,\n                \"file_size_formatted\": \"1.5 MB\",\n                \"uploaded_at\": \"2025-08-28T00:00:00Z\",\n                \"updated_at\": \"2025-08-28T00:00:00Z\",\n                \"uploaded_days_ago\": 22,\n                \"uploaded_date_formatted\": \"Aug 28, 2025\",\n                \"last_updated\": \"22 days ago\",\n                \"file_url\": \"https://bansalimmigration.s3.ap-southeast-1.amazonaws.com/documents/nts_1756380947.pdf\",\n                \"file_key\": \"documents/nts_1756380947.pdf\",\n                \"download_url\": \"https://bansalimmigration.s3.ap-southeast-1.amazonaws.com/documents/nts_1756380947.pdf\",\n                \"is_downloadable\": true,\n                \"mime_type\": \"application/pdf\"\n            },\n            {\n                \"id\": 3,\n                \"name\": \"vipul_draft_90909900a71756377853\",\n                \"file_name\": \"vipul_draft_90909900a71756377853.jpg\",\n                \"file_type\": \"jpg\",\n                \"file_extension\": \"JPEG\",\n                \"doc_type\": \"personal\",\n                \"status\": \"Approved\",\n                \"original_status\": \"signed\",\n                \"file_size\": 3145728,\n                \"file_size_formatted\": \"3.0 MB\",\n                \"uploaded_at\": \"2025-08-28T00:00:00Z\",\n                \"updated_at\": \"2025-08-28T00:00:00Z\",\n                \"uploaded_days_ago\": 22,\n                \"uploaded_date_formatted\": \"Aug 28, 2025\",\n                \"last_updated\": \"22 days ago\",\n                \"file_url\": \"https://bansalimmigration.s3.ap-southeast-1.amazonaws.com/documents/vipul_draft_90909900a71756377853.jpg\",\n                \"file_key\": \"documents/vipul_draft_90909900a71756377853.jpg\",\n                \"download_url\": \"https://bansalimmigration.s3.ap-southeast-1.amazonaws.com/documents/vipul_draft_90909900a71756377853.jpg\",\n                \"is_downloadable\": true,\n                \"mime_type\": \"image/jpeg\"\n            }\n        ],\n        \"summary\": {\n            \"approved\": 2,\n            \"pending\": 1,\n            \"rejected\": 0,\n            \"total\": 3\n        },\n        \"overall_progress\": 67,\n        \"pagination\": {\n            \"current_page\": 1,\n            \"per_page\": 10,\n            \"total_documents\": 3,\n            \"total_pages\": 1,\n            \"has_next_page\": false,\n            \"has_prev_page\": false\n        },\n        \"filters\": {\n            \"search\": \"\",\n            \"status\": \"\",\n            \"doc_type\": \"\",\n            \"sel_matter_id\": 1\n        }\n    }\n}"
				}
			]
		},
		{
			"name": "12. Dashboard - Tasks (View All)",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/upcoming-deadlines?page=1&per_page=10&search=&status=all&priority=all",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"upcoming-deadlines"
					],
					"query": [
						{
							"key": "page",
							"value": "1",
							"description": "Page number for pagination"
						},
						{
							"key": "per_page",
							"value": "10",
							"description": "Number of items per page"
						},
						{
							"key": "search",
							"value": "",
							"description": "Search term for task title"
						},
						{
							"key": "status",
							"value": "all",
							"description": "Filter by status (all, pending, in_progress, completed)"
						},
						{
							"key": "priority",
							"value": "all",
							"description": "Filter by priority (all, high, medium, low)"
						}
					]
				},
				"description": "Get all tasks and deadlines with pagination, search, status and priority filtering options"
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/upcoming-deadlines?page=1&per_page=10&search=&status=all&priority=all",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"upcoming-deadlines"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "10"
								},
								{
									"key": "search",
									"value": ""
								},
								{
									"key": "status",
									"value": "all"
								},
								{
									"key": "priority",
									"value": "all"
								}
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"data\": {\n        \"tasks\": [\n            {\n                \"id\": 1,\n                \"title\": \"Submit additional documents\",\n                \"due_date\": \"2025-09-23\",\n                \"due_datetime\": \"Sep 23, 2025\",\n                \"due_formatted\": \"Due: Sep 23, 2025\",\n                \"status\": \"pending\",\n                \"status_display\": \"Pending\",\n                \"priority\": \"high\",\n                \"priority_display\": \"High\",\n                \"days_until\": 4,\n                \"type\": \"task\",\n                \"task_group\": \"Documentation\",\n                \"description\": \"Submit required additional documents for visa application\",\n                \"is_overdue\": false,\n                \"is_due_soon\": false,\n                \"status_color\": \"#FFA500\",\n                \"priority_color\": \"#FF4444\",\n                \"created_at\": \"2025-09-01T00:00:00Z\",\n                \"updated_at\": \"2025-09-01T00:00:00Z\",\n                \"last_updated\": \"18 days ago\"\n            },\n            {\n                \"id\": 2,\n                \"title\": \"Schedule medical examination\",\n                \"due_date\": \"2025-09-28\",\n                \"due_datetime\": \"Sep 28, 2025\",\n                \"due_formatted\": \"Due: Sep 28, 2025\",\n                \"status\": \"in_progress\",\n                \"status_display\": \"In Progress\",\n                \"priority\": \"medium\",\n                \"priority_display\": \"Medium\",\n                \"days_until\": 9,\n                \"type\": \"task\",\n                \"task_group\": \"Medical\",\n                \"description\": \"Schedule and complete medical examination for visa application\",\n                \"is_overdue\": false,\n                \"is_due_soon\": false,\n                \"status_color\": \"#2196F3\",\n                \"priority_color\": \"#FF9800\",\n                \"created_at\": \"2025-09-05T00:00:00Z\",\n                \"updated_at\": \"2025-09-10T00:00:00Z\",\n                \"last_updated\": \"9 days ago\"\n            },\n            {\n                \"id\": 3,\n                \"title\": \"Complete application form\",\n                \"due_date\": \"2025-09-20\",\n                \"due_datetime\": \"Sep 20, 2025\",\n                \"due_formatted\": \"Due: Sep 20, 2025\",\n                \"status\": \"pending\",\n                \"status_display\": \"Pending\",\n                \"priority\": \"high\",\n                \"priority_display\": \"High\",\n                \"days_until\": 1,\n                \"type\": \"task\",\n                \"task_group\": \"Application\",\n                \"description\": \"Complete and submit the main visa application form\",\n                \"is_overdue\": false,\n                \"is_due_soon\": true,\n                \"status_color\": \"#FFA500\",\n                \"priority_color\": \"#FF4444\",\n                \"created_at\": \"2025-09-01T00:00:00Z\",\n                \"updated_at\": \"2025-09-15T00:00:00Z\",\n                \"last_updated\": \"4 days ago\"\n            }\n        ],\n        \"summary\": {\n            \"all_count\": 3,\n            \"pending_count\": 2,\n            \"in_progress_count\": 1,\n            \"completed_count\": 0,\n            \"high_priority_count\": 2,\n            \"medium_priority_count\": 1,\n            \"low_priority_count\": 0,\n            \"due_soon_count\": 1,\n            \"overdue_count\": 0,\n            \"total_tasks\": 3\n        },\n        \"filter_options\": {\n            \"status_filters\": [\n                {\"key\": \"all\", \"label\": \"All\", \"count\": 3},\n                {\"key\": \"pending\", \"label\": \"Pending\", \"count\": 2},\n                {\"key\": \"in_progress\", \"label\": \"In Progress\", \"count\": 1},\n                {\"key\": \"completed\", \"label\": \"Completed\", \"count\": 0}\n            ],\n            \"priority_filters\": [\n                {\"key\": \"all\", \"label\": \"All Priorities\", \"count\": 3},\n                {\"key\": \"high\", \"label\": \"High\", \"count\": 2},\n                {\"key\": \"medium\", \"label\": \"Medium\", \"count\": 1},\n                {\"key\": \"low\", \"label\": \"Low\", \"count\": 0}\n            ]\n        },\n        \"pagination\": {\n            \"current_page\": 1,\n            \"per_page\": 10,\n            \"total_tasks\": 3,\n            \"total_pages\": 1,\n            \"has_next_page\": false,\n            \"has_prev_page\": false\n        },\n        \"filters\": {\n            \"search\": \"\",\n            \"status\": \"all\",\n            \"priority\": \"all\"\n        }\n    }\n}"
				}
			]
		},
		{
			"name": "13. Dashboard - Recent Activity (View All)",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/recent-activity?page=1&per_page=10&search=&type=",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"recent-activity"
					],
					"query": [
						{
							"key": "page",
							"value": "1",
							"description": "Page number for pagination"
						},
						{
							"key": "per_page",
							"value": "10",
							"description": "Number of items per page"
						},
						{
							"key": "search",
							"value": "",
							"description": "Search term for subject or description"
						},
						{
							"key": "type",
							"value": "",
							"description": "Filter by activity type (Note, Action, Document, Email, Activity)"
						}
					]
				},
				"description": "Get all recent activities with pagination, search, and filtering options"
			}
		},
		{
			"name": "14. Update Profile",
			"request": {
				"method": "PUT",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/profile",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"profile"
					]
				},
				"body": {
					"mode": "raw",
					"raw": "{\n  \"first_name\": \"John\",\n  \"last_name\": \"Doe\",\n  \"phone\": \"+1234567890\",\n  \"address\": \"123 Main St\",\n  \"city\": \"Los Angeles\",\n  \"state\": \"CA\",\n  \"post_code\": \"90210\",\n  \"country\": \"USA\",\n  \"dob\": \"1990-01-01\",\n  \"gender\": \"Male\",\n  \"marital_status\": \"Single\"\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"description": "Update client profile information including personal details, contact information, and preferences"
			}
		},
		{
			"name": "15. Document Management - Personal Document Categories",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/documents/personal/categories",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"documents",
						"personal",
						"categories"
					]
				},
				"description": "Get all personal document categories. Personal documents are matter independent and apply to all cases."
			}
		},
		{
			"name": "16. Document Management - Personal Document Checklist",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/documents/personal/checklist",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"documents",
						"personal",
						"checklist"
					]
				},
				"description": "Get detailed checklist of personal documents from document_checklists table where doc_type=1. Personal documents are matter independent."
			}
		},
		{
			"name": "17. Document Management - Visa Document Categories",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/documents/visa/categories?client_matter_id=9",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"documents",
						"visa",
						"categories"
					],
					"query": [
						{
							"key": "client_matter_id",
							"value": "9",
							"description": "Optional: Filter by specific client matter ID"
						}
					]
				},
				"description": "Get visa document categories from visa_document_types table with client and matter filtering."
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/recent-activity?page=1&per_page=10&search=&type=",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"recent-activity"
							],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "10"
								},
								{
									"key": "search",
									"value": ""
								},
								{
									"key": "type",
									"value": ""
								}
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"data\": {\n        \"activities\": [\n            {\n                \"id\": 1,\n                \"type\": \"Document\",\n                \"title\": \"Added personal document\",\n                \"description\": \"Passport copy uploaded for Case #123. Document is now under review...\",\n                \"created_at\": \"2024-01-01T00:00:00Z\",\n                \"updated_at\": \"2024-01-01T00:00:00Z\",\n                \"time_ago\": \"2 hours ago\",\n                \"task_group\": null\n            },\n            {\n                \"id\": 2,\n                \"type\": \"Note\",\n                \"title\": \"Added a note to case\",\n                \"description\": \"Client provided additional information about employment history...\",\n                \"created_at\": \"2024-01-02T00:00:00Z\",\n                \"updated_at\": \"2024-01-02T00:00:00Z\",\n                \"time_ago\": \"1 day ago\",\n                \"task_group\": \"Case Management\"\n            }\n        ],\n        \"type_summary\": {\n            \"Note\": 5,\n            \"Action\": 3,\n            \"Document\": 8,\n            \"Email\": 2,\n            \"Activity\": 12\n        },\n        \"pagination\": {\n            \"current_page\": 1,\n            \"per_page\": 10,\n            \"total_activities\": 30,\n            \"total_pages\": 3,\n            \"has_next_page\": true,\n            \"has_prev_page\": false\n        },\n        \"filters\": {\n            \"search\": \"\",\n            \"type\": \"\"\n        }\n    }\n}"
				}
			]
		},
		{
			"name": "18. Document Management - Visa Document Checklist",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/documents/visa/checklist",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"documents",
						"visa",
						"checklist"
					]
				},
				"description": "Get detailed checklist of visa documents from document_checklists table where doc_type=2. No matter dependency required."
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/profile",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"profile"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"data\": {\n        \"id\": 1,\n        \"client_id\": \"CLI-001\",\n        \"first_name\": \"John\",\n        \"last_name\": \"Doe\",\n        \"email\": \"client@example.com\",\n        \"phone\": \"+1234567890\",\n        \"address\": \"123 Main St\",\n        \"city\": \"Los Angeles\",\n        \"state\": \"CA\",\n        \"post_code\": \"90210\",\n        \"country\": \"USA\",\n        \"dob\": \"1990-01-01\",\n        \"gender\": \"Male\",\n        \"marital_status\": \"Single\",\n        \"profile_img\": \"path/to/profile/image.jpg\",\n        \"status\": 1,\n        \"role\": 7,\n        \"cp_status\": 1,\n        \"cp_code_verify\": 1,\n        \"email_verified_at\": \"2024-01-01T00:00:00Z\",\n        \"created_at\": \"2024-01-01T00:00:00Z\",\n        \"updated_at\": \"2024-01-01T00:00:00Z\"\n    }\n}"
				}
			]
		},
		{
			"name": "19. Document Management - Add Document Checklist",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n  \"checklist_id\": 1,\n  \"doc_type\": \"personal\",\n  \"doc_category_id\": 1\n}",
					"options": {
						"raw": {
							"language": "json"
						}
					}
				},
				"url": {
					"raw": "{{base_url}}/documents/checklist",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"documents",
						"checklist"
					]
				},
				"description": "Add a new document checklist entry to the documents table. Uses checklist_id to fetch checklist name from document_checklists table based on doc_type. Uses doc_category_id to validate category exists for the specified doc_type. For personal documents, do NOT include client_matter_id (it will be set to null). For visa documents, client_matter_id is MANDATORY."
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"checklist_id\": 1,\n  \"doc_type\": \"personal\",\n  \"doc_category_id\": 1\n}"
						},
						"url": {
							"raw": "{{base_url}}/documents/checklist",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"documents",
								"checklist"
							]
						}
					},
					"status": "Created",
					"code": 201,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Document checklist added successfully\",\n    \"data\": {\n        \"id\": 123,\n        \"checklist\": \"Passport Copy\",\n        \"doc_type\": \"personal\",\n        \"doc_category_id\": 1,\n        \"client_matter_id\": null,\n        \"status\": \"draft\",\n        \"is_client_portal_verify\": 2,\n        \"client_id\": 36464,\n        \"user_id\": 1,\n        \"created_at\": \"2024-01-01T00:00:00Z\",\n        \"updated_at\": \"2024-01-01T00:00:00Z\"\n    }\n}"
				}
			]
		},
		{
			"name": "20. Document Management - Upload Document",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"body": {
					"mode": "formdata",
					"formdata": [
						{
							"key": "document_id",
							"value": "123",
							"type": "text",
							"description": "ID of the document record to update"
						},
						{
							"key": "file",
							"type": "file",
							"src": [],
							"description": "File to upload (max 10MB)"
						}
					]
				},
				"url": {
					"raw": "{{base_url}}/documents/upload",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"documents",
						"upload"
					]
				},
				"description": "Upload a file to an existing document record. Both document_id and file are MANDATORY parameters. Only ONE file can be uploaded at a time. The document must exist and belong to the authenticated client. File will be uploaded to AWS S3 and the document record will be updated with file details."
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "document_id",
									"value": "123",
									"type": "text"
								},
								{
									"key": "file",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/documents/upload",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"documents",
								"upload"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Document uploaded successfully\",\n    \"data\": {\n        \"id\": 123,\n        \"file_name\": \"john_passport_1703123456\",\n        \"file_type\": \"pdf\",\n        \"file_size\": 2048576,\n        \"file_size_formatted\": \"2.0 MB\",\n        \"file_url\": \"https://bansalimmigration.s3.ap-southeast-1.amazonaws.com/CLI-001/personal/john_passport_1703123456.pdf\",\n        \"file_key\": \"john_passport_1703123456.pdf\",\n        \"doc_type\": \"personal\",\n        \"checklist\": \"Passport Copy\",\n        \"status\": \"draft\",\n        \"uploaded_at\": \"2024-01-01T00:00:00Z\"\n    }\n}"
				}
			]
		},
		{
			"name": "21. Workflow Management - Get Workflow Stages",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/workflow/stages?client_matter_id=9",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"workflow",
						"stages"
					],
					"query": [
						{
							"key": "client_matter_id",
							"value": "9",
							"description": "Optional: Get active stage for specific matter"
						}
					]
				},
				"description": "Get all workflow stages with the current active stage for the client. Optional client_matter_id parameter to get active stage for specific matter."
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/workflow/stages?client_matter_id=9",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"workflow",
								"stages"
							],
							"query": [
								{
									"key": "client_matter_id",
									"value": "123"
								}
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"data\": {\n        \"workflow_stages\": [\n            {\n                \"id\": 1,\n                \"name\": \"Initial consultation\",\n                \"stage_name\": \"Initial consultation\",\n                \"is_active\": false,\n                \"is_current_stage\": false,\n                \"created_at\": \"2024-01-01T00:00:00Z\",\n                \"updated_at\": \"2024-01-01T00:00:00Z\"\n            },\n            {\n                \"id\": 2,\n                \"name\": \"Checklist\",\n                \"stage_name\": \"Checklist\",\n                \"is_active\": false,\n                \"is_current_stage\": false,\n                \"created_at\": \"2024-01-01T00:00:00Z\",\n                \"updated_at\": \"2024-01-01T00:00:00Z\"\n            },\n            {\n                \"id\": 12,\n                \"name\": \"Immi Request Received\",\n                \"stage_name\": \"Immi Request Received\",\n                \"is_active\": true,\n                \"is_current_stage\": true,\n                \"created_at\": \"2024-01-01T00:00:00Z\",\n                \"updated_at\": \"2024-01-01T00:00:00Z\"\n            }\n        ],\n        \"total_stages\": 12,\n        \"active_stage\": {\n            \"id\": 12,\n            \"name\": \"Immi Request Received\",\n            \"stage_name\": \"Immi Request Received\",\n            \"client_matter_no\": \"GN_1\",\n            \"matter_status\": 1,\n            \"stage_updated_at\": \"2024-01-01T00:00:00Z\",\n            \"is_active\": true\n        },\n        \"has_active_stage\": true,\n        \"client_id\": 36464,\n        \"client_matter_id\": 123\n    }\n}"
				}
			]
		},
		{
			"name": "22. Workflow Management - Get Workflow Stage Details",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/workflow/stages/12",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"workflow",
						"stages",
						"12"
					]
				},
				"description": "Get details of a specific workflow stage including client matters in that stage."
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/workflow/stages/12",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"workflow",
								"stages",
								"12"
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"data\": {\n        \"stage\": {\n            \"id\": 12,\n            \"name\": \"Immi Request Received\",\n            \"stage_name\": \"Immi Request Received\",\n            \"is_active\": true,\n            \"created_at\": \"2024-01-01T00:00:00Z\",\n            \"updated_at\": \"2024-01-01T00:00:00Z\"\n        },\n        \"client_matters_in_stage\": [\n            {\n                \"id\": 123,\n                \"client_unique_matter_no\": \"GN_1\",\n                \"matter_status\": 1,\n                \"matter_title\": \"General Migration Case\",\n                \"updated_at\": \"2024-01-01T00:00:00Z\"\n            }\n        ],\n        \"total_matters_in_stage\": 1,\n        \"active_matters_in_stage\": 1\n    }\n}"
				}
			]
		},
		{
			"name": "23. Workflow Management - Get Allowed Checklist",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"url": {
					"raw": "{{base_url}}/workflow/allowed-checklist?client_matter_id=9",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"workflow",
						"allowed-checklist"
					],
					"query": [
						{
							"key": "client_matter_id",
							"value": "9",
							"description": "Required: Client matter ID to get allowed checklist for"
						}
					]
				},
				"description": "Get allowed checklist documents for a specific client matter. Returns checklist items that clients can upload documents for."
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/workflow/allowed-checklist?client_matter_id=9",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"workflow",
								"allowed-checklist"
							],
							"query": [
								{
									"key": "client_matter_id",
									"value": "9"
								}
							]
						}
					},
					"status": "OK",
					"code": 200,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"data\": {\n        \"application_info\": {\n            \"application_id\": 20736,\n            \"client_matter_id\": 9,\n            \"client_id\": 36464,\n            \"current_stage\": \"Immi Request Received\",\n            \"status\": 1\n        },\n        \"allowed_checklists\": [\n            {\n                \"id\": 14,\n                \"checklist_name\": \"Passport\",\n                \"document_type\": \"Passport\",\n                \"description\": \"Valid passport copy\",\n                \"type\": 1,\n                \"type_name\": \"Personal Document\",\n                \"is_mandatory\": true,\n                \"due_date\": \"2024-12-31\",\n                \"due_time\": \"23:59:59\",\n                \"created_at\": \"2024-01-01T00:00:00Z\",\n                \"updated_at\": \"2024-01-01T00:00:00Z\"\n            },\n            {\n                \"id\": 15,\n                \"checklist_name\": \"Birth Certificate\",\n                \"document_type\": \"Birth Certificate\",\n                \"description\": \"Official birth certificate\",\n                \"type\": 1,\n                \"type_name\": \"Personal Document\",\n                \"is_mandatory\": false,\n                \"due_date\": \"2024-12-31\",\n                \"due_time\": \"23:59:59\",\n                \"created_at\": \"2024-01-01T00:00:00Z\",\n                \"updated_at\": \"2024-01-01T00:00:00Z\"\n            }\n        ],\n        \"total_allowed_checklists\": 2,\n        \"mandatory_checklists\": 1,\n        \"client_matter_id\": 9\n    }\n}"
				}
			]
		},
		{
			"name": "24. Workflow Management - Upload Allowed Checklist Document",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					}
				],
				"body": {
					"mode": "formdata",
					"formdata": [
						{
							"key": "client_matter_id",
							"value": "9",
							"type": "text",
							"description": "Client matter ID"
						},
						{
							"key": "allowed_checklist_id",
							"value": "14",
							"type": "text",
							"description": "Allowed checklist ID from the allowed checklist list"
						},
						{
							"key": "file",
							"type": "file",
							"src": [],
							"description": "File to upload (max 10MB)"
						}
					]
				},
				"url": {
					"raw": "{{base_url}}/workflow/upload-allowed-checklist",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"workflow",
						"upload-allowed-checklist"
					]
				},
				"description": "Upload a document for an allowed checklist item. Requires client_matter_id, allowed_checklist_id, and file. The file will be uploaded to AWS S3 in the application_documents/{client_unique_id}/ folder and stored in the application_documents table."
			},
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "client_matter_id",
									"value": "9",
									"type": "text"
								},
								{
									"key": "allowed_checklist_id",
									"value": "14",
									"type": "text"
								},
								{
									"key": "file",
									"type": "file",
									"src": []
								}
							]
						},
						"url": {
							"raw": "{{base_url}}/workflow/upload-allowed-checklist",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"workflow",
								"upload-allowed-checklist"
							]
						}
					},
					"status": "Created",
					"code": 201,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Allowed checklist document uploaded successfully\",\n    \"data\": {\n        \"document_id\": 123,\n        \"application_id\": 20736,\n        \"client_matter_id\": 9,\n        \"allowed_checklist_id\": 14,\n        \"checklist_name\": \"Passport\",\n        \"file_name\": \"John_Passport_1703123456\",\n        \"file_type\": \"pdf\",\n        \"file_size\": 2048576,\n        \"file_size_formatted\": \"2.0 MB\",\n        \"file_url\": \"https://bansalcrm.s3.ap-southeast-2.amazonaws.com/application_documents/CLI-001/John_Passport_1703123456.pdf\",\n        \"file_key\": \"John_Passport_1703123456.pdf\",\n        \"s3_path\": \"application_documents/CLI-001/John_Passport_1703123456.pdf\",\n        \"uploaded_at\": \"2024-01-01T00:00:00Z\"\n    }\n}"
				}
			]
		},
		{
			"name": "25. Messaging - Send Message",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					},
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Accept",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"message\": \"This is a message sent via mobile app API at {{$timestamp}}\",\n    \"client_matter_id\": 9\n}"
				},
				"url": {
					"raw": "{{base_url}}/messages/send",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"messages",
						"send"
					]
				},
				"description": "Send a message for a specific client matter. Always broadcasts to all matter users (migration agent, person responsible, person assisting) and superadmin users (role=1). client_matter_id is required. Message will be broadcasted in real-time. Notifications will be sent to all recipients. Each recipient has individual read status tracking. Recipient information is stored in database and returned in response."
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Auto-extract message ID and recipient count from send message response",
							"if (pm.response.code === 201 && pm.response.json().success) {",
							"    const messageId = pm.response.json().data.message_id;",
							"    const recipientCount = pm.response.json().data.recipient_count;",
							"    if (messageId) {",
							"        pm.collectionVariables.set('message_id', messageId);",
							"        console.log('Message ID set:', messageId);",
							"        console.log('Recipient count:', recipientCount);",
							"    }",
							"}"
						],
						"type": "text/javascript"
					}
				}
			]
		},
		{
			"name": "25b. Admin Messaging - Send Direct Message",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{admin_auth_token}}",
						"description": "Use admin token from admin login response"
					},
					{
						"key": "Content-Type",
						"value": "application/json"
					},
					{
						"key": "Accept",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"message\": \"This is a direct message sent by admin at {{$timestamp}}\",\n    \"client_matter_id\": 9\n}"
				},
				"url": {
					"raw": "{{base_url}}/messages/send",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"messages",
						"send"
					]
				},
				"description": "Send a message from admin. Use admin_auth_token from admin login. Message will be broadcasted to all matter users and superadmins. Message will be broadcasted in real-time. Recipient information is stored in database and returned in response."
			},
			"event": [
				{
					"listen": "test",
					"script": {
						"exec": [
							"// Auto-extract message ID from send message response",
							"if (pm.response.code === 201 && pm.response.json().success) {",
							"    const messageId = pm.response.json().data.message_id;",
							"    const recipientId = pm.response.json().data.message.recipient_id;",
							"    if (messageId) {",
							"        pm.collectionVariables.set('admin_message_id', messageId);",
							"        pm.collectionVariables.set('admin_recipient_id', recipientId);",
							"        console.log('Admin Message ID set:', messageId);",
							"        console.log('Recipient ID:', recipientId);",
							"    }",
							"}"
						],
						"type": "text/javascript"
					}
				}
			],
			"response": [
				{
					"name": "Success Response",
					"originalRequest": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{admin_auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Accept",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"message\": \"This is a direct message sent by admin at {{$timestamp}}\",\n    \"client_matter_id\": 9,\n    \"recipient_id\": 40445\n}"
						},
						"url": {
							"raw": "{{base_url}}/messages/send",
							"host": [
								"{{base_url}}"
							],
							"path": [
								"messages",
								"send"
							]
						}
					},
					"status": "Created",
					"code": 201,
					"_postman_previewlanguage": "json",
					"header": [
						{
							"key": "Content-Type",
							"value": "application/json"
						}
					],
					"cookie": [],
					"body": "{\n    \"success\": true,\n    \"message\": \"Message sent successfully\",\n    \"data\": {\n        \"message_id\": 30,\n        \"message\": {\n            \"id\": 30,\n            \"message\": \"This is a direct message sent by admin at 1759845000\",\n            \"sender\": \"Super1 Admin1\",\n            \"sender_id\": 1,\n            \"recipient_ids\": [40445],\n            \"sent_at\": \"2025-01-07T13:30:00.000000Z\",\n            \"client_matter_id\": 9,\n            \"recipient_count\": 1\n        },\n        \"sent_at\": \"2025-01-07T13:30:00.000000Z\",\n        \"recipient_count\": 1\n    }\n}"
				}
			]
		},
		{
			"name": "26. Messaging - Get All Messages",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					},
					{
						"key": "Accept",
						"value": "application/json"
					}
				],
				"url": {
					"raw": "{{base_url}}/messages?client_matter_id=9&page=1&limit=20",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"messages"
					],
					"query": [
						{
							"key": "client_matter_id",
							"value": "9",
							"description": "Client matter ID (required)"
						},
						{
							"key": "page",
							"value": "1",
							"description": "Page number for pagination"
						},
						{
							"key": "limit",
							"value": "20",
							"description": "Number of messages per page"
						}
					]
				},
				"description": "Get all messages for a specific client matter. Returns both sent and received messages with recipient information. Shows recipient_ids, recipients (with names), and recipient_count for each message. Individual read status is shown for current user. client_matter_id is required. Optional pagination with page and limit parameters."
			}
		},
		{
			"name": "27. Messaging - Get Message Details",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					},
					{
						"key": "Accept",
						"value": "application/json"
					}
				],
				"url": {
					"raw": "{{base_url}}/messages/{{message_id}}",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"messages",
						"{{message_id}}"
					]
				},
				"description": "Get detailed information about a specific message including all recipients with their read status. Shows recipient information for all users who received the message, useful for senders to see who has read their message."
			}
		},
		{
			"name": "28. Messaging - Mark Message as Read",
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					},
					{
						"key": "Accept",
						"value": "application/json"
					}
				],
				"url": {
					"raw": "{{base_url}}/messages/{{message_id}}/read",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"messages",
						"{{message_id}}",
						"read"
					]
				},
				"description": "Mark a message as read. Only recipients of the message can mark it as read. Updates individual read status for the current user in the pivot table. This will broadcast read status to the sender. Returns 403 if user is not a recipient of the message."
			}
		},
		{
			"name": "29. Messaging - Get Unread Count",
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{auth_token}}",
						"description": "Use token from login response"
					},
					{
						"key": "Accept",
						"value": "application/json"
					}
				],
				"url": {
					"raw": "{{base_url}}/messages/unread-count",
					"host": [
						"{{base_url}}"
					],
					"path": [
						"messages",
						"unread-count"
					]
				},
				"description": "Get the count of unread messages for the authenticated user. Counts messages from the pivot table where the current user is a recipient and the message is unread."
			}
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Global test script for token management",
					"if (pm.response.code === 401 && pm.response.json().message === 'Unauthenticated.') {",
					"    console.log('Access token expired, attempting to refresh...');",
					"    ",
					"    const refreshToken = pm.collectionVariables.get('refresh_token');",
					"    if (refreshToken) {",
					"        pm.sendRequest({",
					"            url: pm.collectionVariables.get('base_url') + '/refresh',",
					"            method: 'POST',",
					"            header: {",
					"                'Content-Type': 'application/json'",
					"            },",
					"            body: {",
					"                mode: 'raw',",
					"                raw: JSON.stringify({ refresh_token: refreshToken })",
					"            }",
					"        }, function (err, response) {",
					"            if (response && response.json().success) {",
					"                const newTokens = response.json().data;",
					"                pm.collectionVariables.set('auth_token', newTokens.token);",
					"                pm.collectionVariables.set('refresh_token', newTokens.refresh_token);",
					"                console.log('Tokens refreshed successfully');",
					"            } else {",
					"                console.log('Token refresh failed, please login again');",
					"            }",
					"        });",
					"    }",
					"}"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://127.0.0.1:8000/api",
			"type": "string"
		},
		{
			"key": "auth_token",
			"value": "",
			"type": "string",
			"description": "Authentication token from login response"
		},
		{
			"key": "refresh_token",
			"value": "",
			"type": "string",
			"description": "Refresh token from login response"
		},
		{
			"key": "message_id",
			"value": "",
			"type": "string",
			"description": "Message ID (auto-populated from send message response)"
		}
	]
}