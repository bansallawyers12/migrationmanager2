<!DOCTYPE html>
<html>
<head>
    <title>EOI Compose Test</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
</head>
<body>
    <h1>EOI Compose Endpoints Test</h1>
    
    <div style="margin: 20px;">
        <h3>Test Parameters:</h3>
        <label>Client ID: <input type="text" id="test-client-id" value="" placeholder="e.g., 123"></label><br><br>
        <label>EOI ID: <input type="text" id="test-eoi-id" value="" placeholder="e.g., 456"></label><br><br>
        <label>EOI Number: <input type="text" id="test-eoi-number" value="" placeholder="e.g., E012345"></label><br><br>
        
        <button onclick="testEmailPreview()">Test Email Preview</button>
        <button onclick="testVisaDocuments()">Test Visa Documents</button>
        
        <h3>Results:</h3>
        <pre id="results" style="background: #f5f5f5; padding: 10px; min-height: 200px;"></pre>
    </div>
    
    <script>
        function log(message) {
            const results = document.getElementById('results');
            results.textContent += message + '\n';
            console.log(message);
        }
        
        function testEmailPreview() {
            const clientId = document.getElementById('test-client-id').value;
            const eoiId = document.getElementById('test-eoi-id').value;
            
            if (!clientId || !eoiId) {
                alert('Please enter Client ID and EOI ID');
                return;
            }
            
            document.getElementById('results').textContent = '';
            log('Testing Email Preview...');
            log('URL: /clients/' + clientId + '/eoi-roi/' + eoiId + '/email-preview');
            
            $.ajax({
                url: `/clients/${clientId}/eoi-roi/${eoiId}/email-preview`,
                method: 'GET',
                success: function(response) {
                    log('✓ SUCCESS!');
                    log(JSON.stringify(response, null, 2));
                },
                error: function(xhr, status, error) {
                    log('✗ ERROR!');
                    log('Status: ' + status);
                    log('Error: ' + error);
                    log('Response: ' + xhr.responseText);
                    log('Status Code: ' + xhr.status);
                }
            });
        }
        
        function testVisaDocuments() {
            const clientId = document.getElementById('test-client-id').value;
            const eoiNumber = document.getElementById('test-eoi-number').value;
            
            if (!clientId) {
                alert('Please enter Client ID');
                return;
            }
            
            document.getElementById('results').textContent = '';
            log('Testing Visa Documents...');
            log('URL: /clients/' + clientId + '/eoi-roi/visa-documents?eoi_number=' + eoiNumber);
            
            $.ajax({
                url: `/clients/${clientId}/eoi-roi/visa-documents`,
                method: 'GET',
                data: { eoi_number: eoiNumber },
                success: function(response) {
                    log('✓ SUCCESS!');
                    log(JSON.stringify(response, null, 2));
                },
                error: function(xhr, status, error) {
                    log('✗ ERROR!');
                    log('Status: ' + status);
                    log('Error: ' + error);
                    log('Response: ' + xhr.responseText);
                    log('Status Code: ' + xhr.status);
                }
            });
        }
    </script>
</body>
</html>
